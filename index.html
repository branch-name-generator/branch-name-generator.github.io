<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Generate valid Git branch names online based on issue number and task title." />
  <meta name="keywords" content="Git branch generator, Git branch name, online tool" />
  <meta name="author" content="Git Branch Name Generator" />
  <title>Git Branch Name Online Generator</title>
  <style>
    :root {
      --bg: #ffffff;
      --text: #000000;
      --input-bg: #f0f0f0;
      --code-bg: #f7f7f7;
      --button-bg: #e0e0e0;
    }
    [data-theme="dark"] {
      --bg: #1e1e1e;
      --text: #f5f5f5;
      --input-bg: #2d2d2d;
      --code-bg: #2a2a2a;
      --button-bg: #3a3a3a;
    }
    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: sans-serif;
      max-width: 800px;
      margin: 2rem auto;
      padding: 1rem;
      line-height: 1.6;
    }
    label {
      display: block;
      margin-top: 1.5rem;
      font-weight: bold;
    }
    input[type="text"] {
      width: 100%;
      padding: 0.5rem;
      margin-top: 0.25rem;
      background-color: var(--input-bg);
      border: 1px solid #ccc;
      color: var(--text);
    }
    input[readonly] {
      cursor: pointer;
    }
    .button {
      margin-top: 0.5rem;
      padding: 0.4rem 0.8rem;
      cursor: pointer;
      background-color: var(--button-bg);
      border: none;
      color: var(--text);
    }
    .code-block {
      background: var(--code-bg);
      padding: 1rem;
      margin-top: 1rem;
      border-radius: 4px;
    }
    pre {
      margin: 0;
      overflow-x: auto;
      white-space: pre-wrap;
    }
    .code-with-copy {
      display: flex;
      flex-direction: column;
      margin-top: 0.5rem;
    }
    footer {
      margin-top: 3rem;
      text-align: center;
      font-size: 0.9rem;
      color: var(--text);
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <div class="top-bar">
    <button class="button" onclick="toggleTheme()">Toggle Theme</button>
    <iframe src="https://ghbtns.com/github-btn.html?user=branch-name-generator&repo=branch-name-generator.github.io&type=star&count=true" frameborder="0" scrolling="0" width="150" height="20" title="GitHub"></iframe>
  </div>

  <h1>Git Branch Name Online Generator</h1>
  <p>Enter the issue number and task name to generate a valid Git branch name.</p>

  <label for="issue-number-input">Issue Number</label>
  <input type="text" id="issue-number-input" placeholder="e.g., 1234" />
  <button class="button" onclick="copyToClipboard('issue-number-input', this)">Copy</button>

  <label for="issue-name-input">Issue Name</label>
  <input type="text" id="issue-name-input" placeholder="e.g., Fix login bug" />
  <button class="button" onclick="copyToClipboard('issue-name-input', this)">Copy</button>

  <label for="git-branch-name-output">Git Branch Name</label>
  <input type="text" id="git-branch-name-output" readonly onclick="copyToClipboard('git-branch-name-output', this)" />
  <button class="button" onclick="copyToClipboard('git-branch-name-output', this)">Copy</button>

  <div class="code-block">
    <div class="code-with-copy">
      <pre id="code1">git checkout -b </pre>
      <button class="button" onclick="copyCode('code1', this)">Copy</button>
    </div>
    <div class="code-with-copy">
      <pre id="code2">git checkout master && git pull && git checkout -b </pre>
      <button class="button" onclick="copyCode('code2', this)">Copy</button>
    </div>
    <div class="code-with-copy">
      <pre id="code3">git checkout main && git pull && git checkout -b </pre>
      <button class="button" onclick="copyCode('code3', this)">Copy</button>
    </div>
    <div class="code-with-copy">
      <pre id="code4">git commit -m "" --allow-empty</pre>
      <button class="button" onclick="copyCode('code4', this)">Copy</button>
    </div>
  </div>

  <footer>
    Created with ❤️ using ChatGPT · <a href="https://github.com/branch-name-generator/branch-name-generator.github.io" target="_blank">Source Code</a>
  </footer>

  <script>
    const issueNumberInput = document.getElementById('issue-number-input');
    const issueNameInput = document.getElementById('issue-name-input');
    const output = document.getElementById('git-branch-name-output');

    function slugify(text) {
      return text
        .toLowerCase()
        .trim()
        .replace(/[^a-z0-9]+/g, '-')
        .replace(/^-+|-+$/g, '')
        .substring(0, 100);
    }

    function update() {
      const number = issueNumberInput.value.trim();
      const name = issueNameInput.value.trim();
      const slug = slugify(name);
      const branch = number ? `${number}/${slug}` : slug;

      output.value = branch;

      document.getElementById('code1').textContent = `git checkout -b ${branch}`;
      document.getElementById('code2').textContent = `git checkout master && git pull && git checkout -b ${branch}`;
      document.getElementById('code3').textContent = `git checkout main && git pull && git checkout -b ${branch}`;
      document.getElementById('code4').textContent = `git commit -m "${number} ${name}" --allow-empty`;
    }

    function copyToClipboard(id, btn) {
      const input = document.getElementById(id);
      input.select();
      input.setSelectionRange(0, 99999);
      document.execCommand("copy");
      showCopied(btn);
    }

    function copyCode(id, btn) {
      const text = document.getElementById(id).textContent;
      navigator.clipboard.writeText(text);
      showCopied(btn);
    }

    function showCopied(btn) {
      const original = btn.textContent;
      btn.textContent = "Copied!";
      btn.disabled = true;
      setTimeout(() => {
        btn.textContent = original;
        btn.disabled = false;
      }, 1000);
    }

    issueNumberInput.addEventListener('input', update);
    issueNameInput.addEventListener('input', update);

    function toggleTheme() {
      const html = document.documentElement;
      const current = html.getAttribute("data-theme");
      const next = current === "light" ? "dark" : "light";
      html.setAttribute("data-theme", next);
      localStorage.setItem("theme", next);
    }

    (function () {
      const saved = localStorage.getItem("theme");
      if (saved) document.documentElement.setAttribute("data-theme", saved);
      update();
    })();
  </script>
</body>
</html>
